using System;\nusing System.Net;\nusing System.Threading.Tasks;\nusing NUnit.Framework;\nusing DonorApp.Services.ApiClient;\nusing DonorApp.Services.DTO;\n\nnamespace DonorApp.Tests\n{\n    [TestFixture]\n    public class DonationTests\n    {\n        private DonationApiClient _apiClient;\n\n        [SetUp]\n        public void Setup()\n        {\n            _apiClient = new DonationApiClient(\"https://api.example.com\");\n        }\n\n        [Test]\n        public async Task ConfirmDonation_SuccessfulConfirmation_ReturnsOk()\n        {\n            // Arrange\n            var donationDto = CreateSampleDonationDto();\n\n            // Act\n            var response = await _apiClient.ConfirmDonationAsync(donationDto);\n\n            // Assert\n            Assert.AreEqual(HttpStatusCode.OK, response.StatusCode);\n            Assert.IsNotNull(response.Content);\n            Assert.AreEqual(200, response.Content.StatusCode);\n            Assert.AreEqual(\"Donation successfully confirmed.\", response.Content.Content);\n        }\n\n        [Test]\n        public async Task ConfirmDonation_BadRequest_ReturnsBadRequest()\n        {\n            // Arrange\n            var donationDto = new DonationDto(); // Invalid DTO\n\n            // Act\n            var response = await _apiClient.ConfirmDonationAsync(donationDto);\n\n            // Assert\n            Assert.AreEqual(HttpStatusCode.BadRequest, response.StatusCode);\n            Assert.IsNotNull(response.Content);\n            Assert.AreEqual(400, response.Content.StatusCode);\n            Assert.IsTrue(response.Content.Content.Contains(\"Bad request\"));\n        }\n\n        [Test]\n        public async Task ConfirmDonation_ServerError_ReturnsInternalServerError()\n        {\n            // Arrange\n            var donationDto = CreateSampleDonationDto();\n            _apiClient.SimulateError(true);\n\n            // Act\n            var response = await _apiClient.ConfirmDonationAsync(donationDto);\n\n            // Assert\n            Assert.AreEqual(HttpStatusCode.InternalServerError, response.StatusCode);\n            Assert.IsNotNull(response.Content);\n            Assert.AreEqual(500, response.Content.StatusCode);\n            Assert.IsTrue(response.Content.Content.Contains(\"Simulated server error\"));\n        }\n\n        private DonationDto CreateSampleDonationDto()\n        {\n            return new DonationDto\n            {\n                Id = Guid.NewGuid(),\n                UserId = \"user123\",\n                FirstName = \"John\",\n                LastName = \"Doe\",\n                Date = DateTime.UtcNow,\n                BloodType = \"A+\",\n                DonationTypeId = 1,\n                CityId = 1,\n                DonationCenterId = 1,\n                DonationStatus = DonationStatuses.Status1,\n                BloodVolume = 450,\n                HealthFeeling = HealthFeeling.Feeling3,\n                FeelingComment = \"Feeling good\",\n                Certificates = new List<CertificateDto>\n                {\n                    new CertificateDto\n                    {\n                        Id = Guid.NewGuid(),\n                        CreateDate = DateTime.UtcNow,\n                        PictureName = \"certificate.jpg\",\n                        PictureSize = 1024,\n                        Status = CertificateStatus.Status1\n                    }\n                },\n                ExperienceRate = 5,\n                Comment = \"Great experience\",\n                QuickComments = new List<QuickCommentDto>\n                {\n                    new QuickCommentDto { Id = 1, Comment = \"Quick and easy\" }\n                }\n            };\n        }\n    }\n}\n